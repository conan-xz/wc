<!-- pages/astrology-result/astrology-result.wxml -->
<view class="page-container">
  <!-- æœ‰å‡ºç”Ÿä¿¡æ¯æ—¶ï¼šæ˜¾ç¤ºä¸ªäººæ˜Ÿç›˜æ¦‚è§ˆ -->
  <view wx:if="{{hasBirthInfo && birthInfo}}" class="profile-view">
    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <view class="profile-card">
      <view class="profile-header">
        <view class="avatar">
          <text class="avatar-icon">{{getSunSignSymbol()}}</text>
        </view>
        <view class="profile-info">
          <text class="profile-name">æˆ‘çš„æ˜Ÿç›˜</text>
          <text class="profile-date">{{formatBirthInfo()}}</text>
        </view>
        <view class="edit-btn" bind:tap="editInfo">
          <text class="edit-icon">âœï¸</text>
        </view>
      </view>

      <!-- æ ¸å¿ƒä¸‰æ˜Ÿåº§ -->
      <view class="core-signs" wx:if="{{chartData}}">
        <view class="sign-item">
          <text class="sign-label">å¤ªé˜³</text>
          <text class="sign-symbol">{{getSunSign().symbol}}</text>
          <text class="sign-name">{{getSunSign().name}}</text>
        </view>
        <view class="sign-item">
          <text class="sign-label">æœˆäº®</text>
          <text class="sign-symbol">{{getMoonSign().symbol}}</text>
          <text class="sign-name">{{getMoonSign().name}}</text>
        </view>
        <view class="sign-item">
          <text class="sign-label">ä¸Šå‡</text>
          <text class="sign-symbol">{{getAscSign().symbol}}</text>
          <text class="sign-name">{{getAscSign().name}}</text>
        </view>
      </view>
    </view>

    <!-- å¿«é€Ÿä¿¡æ¯ -->
    <view class="quick-info" wx:if="{{chartData}}">
      <view class="info-row">
        <view class="info-item">
          <text class="info-value">{{chartData.planets ? chartData.planets.length : 0}}</text>
          <text class="info-label">è¡Œæ˜Ÿ</text>
        </view>
        <view class="info-item">
          <text class="info-value">12</text>
          <text class="info-label">å®«ä½</text>
        </view>
        <view class="info-item">
          <text class="info-value">{{chartData.aspects ? chartData.aspects.length : 0}}</text>
          <text class="info-label">ç›¸ä½</text>
        </view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <view class="action-btn" bind:tap="editInfo">
        <text class="btn-icon">âœï¸</text>
        <text class="btn-text">ç¼–è¾‘ä¿¡æ¯</text>
      </view>
      <view class="action-btn primary" bind:tap="shareChart">
        <text class="btn-icon">ğŸ“¤</text>
        <text class="btn-text">åˆ†äº«æ˜Ÿç›˜</text>
      </view>
    </view>
  </view>

  <!-- æ²¡æœ‰å‡ºç”Ÿä¿¡æ¯æ—¶ï¼šæ˜¾ç¤ºæç¤º -->
  <view wx:else class="welcome-view">
    <view class="welcome-header">
      <text class="welcome-title">æš‚æ— æ˜Ÿç›˜æ•°æ®</text>
      <text class="welcome-subtitle">è¯·å…ˆæ·»åŠ å‡ºç”Ÿä¿¡æ¯</text>
    </view>

    <view class="welcome-content">
      <view class="create-btn" bind:tap="editInfo">
        <text class="create-icon">âœ¨</text>
        <text class="create-text">åˆ›å»ºæˆ‘çš„æ˜Ÿç›˜</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½ä¸­é®ç½© -->
  <view class="loading-overlay" wx:if="{{isLoading}}">
    <view class="loading-content">
      <text class="loading-text">æ­£åœ¨è®¡ç®—æ˜Ÿç›˜...</text>
    </view>
  </view>
</view>